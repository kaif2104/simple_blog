{% extends 'base.html' %}

{% block content %}
  <!-- Welcome Section -->
  {% if not user.is_authenticated %}
  <div class="welcome-section text-center">
    <div class="container">
      <h1 class="display-4 mb-3">Welcome to Django Blog</h1>
      <p class="lead mb-4">Discover amazing stories and share your thoughts with the world</p>
      <div class="d-flex gap-3 justify-content-center">
        <a href="{% url 'signup' %}" class="btn btn-light btn-lg">Get Started</a>
        <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">Sign In</a>
      </div>
    </div>
  </div>
  {% else %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Latest Posts</h1>
    <a href="{% url 'post_new' %}" class="btn btn-primary">
      <i class="fas fa-plus"></i> New Post
    </a>
  </div>
  {% endif %}

  <!-- Blog Posts -->
  <div class="row">
  {% for post in posts %}
    <div class="col-md-8 offset-md-2">
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title"><a href="{% url 'post_detail' post.pk %}" class="text-decoration-none">{{ post.title }}</a></h2>
          <p class="text-muted">by {{ post.author }} on {{ post.created_at|date:"F d, Y" }}</p>
          <p class="card-text">{{ post.content|truncatewords:30 }}</p>
          <a href="{% url 'post_detail' post.pk %}" class="btn btn-primary">Read More â†’</a>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-md-8 offset-md-2">
      <div class="text-center py-5">
        <h3 class="text-muted">No posts yet</h3>
        <p class="text-muted">Be the first to share your story!</p>
        {% if user.is_authenticated %}
          <a href="{% url 'post_new' %}" class="btn btn-primary">Create Your First Post</a>
        {% endif %}
      </div>
    </div>
  {% endfor %}
  </div>
{% endblock content %}